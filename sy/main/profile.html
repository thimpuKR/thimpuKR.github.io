<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 프로필 - 성연</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <!-- Pretendard 폰트 CDN -->
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#3A5A40',
                            light: '#4F6F52'
                        },
                        secondary: {
                            DEFAULT: '#F5EBE0',
                            dark: '#EADBC8'
                        },
                        accent: {
                            DEFAULT: '#FFDAB9',
                        },
                        gold: {
                            DEFAULT: '#B08D57',
                        }
                    },
                    fontFamily: {
                        sans: ['Pretendard', 'Noto Sans KR', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app" class="pb-20"> <!-- 하단 네비게이션 공간 확보 -->
        <!-- 헤더 -->
        <header class="bg-white p-4 flex justify-between items-center shadow-sm">
            <h1 class="text-xl font-bold">내 프로필</h1>
            <div class="flex items-center">
                <a href="notifications.html" class="text-gray-600 mr-4 touchable">
                    <i class="fas fa-bell text-xl"></i>
                </a>
                <a href="settings.html" class="text-gray-600 touchable">
                    <i class="fas fa-cog text-xl"></i>
                </a>
            </div>
        </header>
        
        <!-- 메인 컨텐츠 -->
        <main class="container mx-auto px-4 py-6 max-w-3xl">
            <!-- 프로필 헤더 -->
            <div class="profile-card p-6">
                <div class="flex items-start">
                    <div class="relative">
                        <img src="https://picsum.photos/seed/user123/200/200" alt="프로필 사진" class="w-24 h-24 rounded-full object-cover border-4 border-white shadow-md">
                        <button class="absolute bottom-0 right-0 bg-secondary text-primary rounded-full w-8 h-8 flex items-center justify-center shadow-md">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="ml-6 flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-2xl font-bold">정현우
                                    <span id="verification-badge" class="inline-flex items-center ml-2 px-2 py-0.5 text-xs font-semibold rounded-full align-middle">
                                        <!-- 인증 배지 동적 표시 -->
                                    </span>
                                </h2>
                                <p class="text-gray-600">31세 · 서울 강남구</p>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <div class="mr-6">
                                <p class="text-sm text-gray-500">프로필 조회</p>
                                <p class="font-bold">124</p>
                            </div>
                            <div class="mr-6">
                                <p class="text-sm text-gray-500">관심 표시</p>
                                <p class="font-bold">32</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">매칭</p>
                                <p class="font-bold">8</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 프로필 완성도 -->
            <div class="profile-card p-6">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-bold flex items-center">
                        <img id="certification-badge" src="../assets/badge_level1.svg" alt="인증 배지" class="w-8 h-8 mr-2">
                        프로필 완성도
                    </h3>
                    <span class="text-primary font-medium">60%</span>
                </div>
                <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-3">
                    <div class="h-full bg-primary rounded-full" style="width: 60%"></div>
                </div>
                <div class="flex justify-between text-sm">
                    <a href="../questions/section1.html" class="text-primary">질문지 계속하기</a>
                    <span class="text-gray-500">3/5 섹션 완료</span>
                </div>
            </div>
            
            <!-- 기본 정보 -->
            <div class="profile-card p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">기본 정보</h3>
                    <button id="edit-basic-info-button" class="text-primary text-sm underline font-medium">수정</button>
                </div>
                
                <!-- 기본 정보 - 보기 모드 -->
                <div id="basic-info-display">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-gray-500 text-sm">직업</p>
                            <p id="display-occupation">소프트웨어 개발자</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">학력</p>
                            <p id="display-education">서울대학교</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">키</p>
                            <p id="display-height">178cm</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">체형</p>
                            <p id="display-body-type">보통</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">음주</p>
                            <p id="display-drinking">가끔</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">흡연</p>
                            <p id="display-smoking">비흡연</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">종교</p>
                            <p id="display-religion">무교</p>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">혈액형</p>
                            <p id="display-blood-type">O형</p>
                        </div>
                    </div>
                </div>

                <!-- 기본 정보 - 편집 모드 (처음에는 숨김) -->
                <div id="basic-info-edit" class="hidden">
                     <div class="grid grid-cols-1 gap-4">
                         <div>
                             <label for="edit-occupation" class="block text-gray-500 text-sm mb-1">직업</label>
                             <input type="text" id="edit-occupation" class="w-full p-2 border rounded-md" value="소프트웨어 개발자">
                         </div>
                         <div>
                            <label for="edit-education" class="block text-gray-500 text-sm mb-1">학력</label>
                            <input type="text" id="edit-education" class="w-full p-2 border rounded-md" value="서울대학교">
                         </div>
                         <div>
                            <label for="edit-height" class="block text-gray-500 text-sm mb-1">키</label>
                            <input type="text" id="edit-height" class="w-full p-2 border rounded-md" value="178cm">
                         </div>
                         <div>
                            <label for="edit-body-type" class="block text-gray-500 text-sm mb-1">체형</label>
                            <input type="text" id="edit-body-type" class="w-full p-2 border rounded-md" value="보통">
                         </div>
                         <div>
                            <label for="edit-drinking" class="block text-gray-500 text-sm mb-1">음주</label>
                            <input type="text" id="edit-drinking" class="w-full p-2 border rounded-md" value="가끔">
                         </div>
                         <div>
                            <label for="edit-smoking" class="block text-gray-500 text-sm mb-1">흡연</label>
                            <input type="text" id="edit-smoking" class="w-full p-2 border rounded-md" value="비흡연">
                         </div>
                         <div>
                            <label for="edit-religion" class="block text-gray-500 text-sm mb-1">종교</label>
                            <input type="text" id="edit-religion" class="w-full p-2 border rounded-md" value="무교">
                         </div>
                         <div>
                            <label for="edit-blood-type" class="block text-gray-500 text-sm mb-1">혈액형</label>
                            <input type="text" id="edit-blood-type" class="w-full p-2 border rounded-md" value="O형">
                         </div>
                     </div>
                    <div class="mt-6 flex justify-end space-x-3">
                        <button id="cancel-basic-info-button" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 font-medium">취소</button>
                        <button id="save-basic-info-button" class="px-4 py-2 bg-primary text-white rounded-md font-medium">저장</button>
                    </div>
                </div>
            </div>
            
            <!-- 자기소개 -->
            <div class="profile-card p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">자기소개</h3>
                    <button id="edit-bio-button" class="text-primary text-sm underline font-medium">수정</button>
                </div>
                
                <!-- 자기소개 - 보기 모드 -->
                <div id="bio-display">
                    <p id="display-bio" class="text-gray-700 whitespace-pre-line">안녕하세요! 서울에서 소프트웨어 개발자로 일하고 있는 현우입니다.

취미로 등산과 사진 촬영을 즐기며, 주말에는 주로 서울 근교의 산을 다니거나 카페에서 책을 읽는 것을 좋아합니다.

진솔하고 깊이 있는 대화를 나눌 수 있는 파트너를 찾고 있습니다. 서로의 가치관을 존중하고 함께 성장할 수 있는 관계가 되었으면 합니다.</p>
                </div>

                <!-- 자기소개 - 편집 모드 (처음에는 숨김) -->
                <div id="bio-edit" class="hidden">
                    <textarea id="edit-bio" class="w-full p-3 border rounded-md min-h-[150px] focus:outline-none focus:ring-2 focus:ring-primary" placeholder="자기소개를 입력하세요">안녕하세요! 서울에서 소프트웨어 개발자로 일하고 있는 현우입니다.

취미로 등산과 사진 촬영을 즐기며, 주말에는 주로 서울 근교의 산을 다니거나 카페에서 책을 읽는 것을 좋아합니다.

진솔하고 깊이 있는 대화를 나눌 수 있는 파트너를 찾고 있습니다. 서로의 가치관을 존중하고 함께 성장할 수 있는 관계가 되었으면 합니다.</textarea>
                    <div class="mt-4 flex justify-end space-x-3">
                        <button id="cancel-bio-button" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 font-medium">취소</button>
                        <button id="save-bio-button" class="px-4 py-2 bg-primary text-white rounded-md font-medium">저장</button>
                    </div>
                </div>
            </div>
            
            <!-- 관심사 & 취향 -->
            <div class="profile-card p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">관심사 & 취향</h3>
                    <button id="edit-interests-button" class="text-primary text-sm underline font-medium">수정</button>
                </div>
                
                <!-- 관심사 & 취향 - 보기 모드 -->
                <div id="interests-display">
                    <div class="mb-4">
                        <h4 class="font-medium mb-2">취미</h4>
                        <div id="display-hobbies" class="flex flex-wrap">
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">등산</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">사진 촬영</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">독서</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">여행</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">카페 탐방</span>
                        </div>
                    </div>
                    <div class="mb-4">
                        <h4 class="font-medium mb-2">음악</h4>
                        <div id="display-music" class="flex flex-wrap">
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">인디</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">재즈</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">클래식</span>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium mb-2">영화/드라마</h4>
                        <div id="display-movies-dramas" class="flex flex-wrap">
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">다큐멘터리</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">SF</span>
                            <span class="bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block">미스터리</span>
                        </div>
                    </div>
                </div>

                <!-- 관심사 & 취향 - 편집 모드 (처음에는 숨김) -->
                <div id="interests-edit" class="hidden">
                    <div class="space-y-4">
                         <div>
                             <label for="edit-hobbies" class="block text-sm font-medium text-gray-700">취미 (쉼표로 구분)</label>
                             <input type="text" id="edit-hobbies" class="mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" value="등산, 사진 촬영, 독서, 여행, 카페 탐방">
                         </div>
                         <div>
                             <label for="edit-music" class="block text-sm font-medium text-gray-700">음악 (쉼표로 구분)</label>
                             <input type="text" id="edit-music" class="mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" value="인디, 재즈, 클래식">
                         </div>
                          <div>
                             <label for="edit-movies-dramas" class="block text-sm font-medium text-gray-700">영화/드라마 (쉼표로 구분)</label>
                             <input type="text" id="edit-movies-dramas" class="mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" value="다큐멘터리, SF, 미스터리">
                         </div>
                    </div>
                    <div class="mt-6 flex justify-end space-x-3">
                        <button id="cancel-interests-button" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 font-medium">취소</button>
                        <button id="save-interests-button" class="px-4 py-2 bg-primary text-white rounded-md font-medium">저장</button>
                    </div>
                </div>
            </div>
            
            <!-- 사진 갤러리 -->
            <div class="profile-card">
                <div class="flex justify-between items-center p-6 pb-3">
                    <h3 class="text-lg font-bold">사진 갤러리</h3>
                    <label for="add-photo-input" class="text-primary text-xl cursor-pointer touchable">
                        <i class="fas fa-plus"></i>
                        <input type="file" id="add-photo-input" class="hidden" accept="image/*">
                    </label>
                </div>
                <div class="swiper profile-photo-slider p-3">
                     <!-- Additional required wrapper -->
                     <div class="swiper-wrapper">
                         <!-- Slides -->
                         <div class="swiper-slide aspect-square overflow-hidden rounded-lg bg-gray-200 relative">
                             <img src="https://picsum.photos/seed/photo1/300/300" alt="프로필 사진 1" class="w-full h-full object-cover">
                              <button class="delete-photo-icon absolute top-3 right-3 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer z-10" data-photo-id="1"><i class="fas fa-times"></i></button>
                         </div>
                         <div class="swiper-slide aspect-square overflow-hidden rounded-lg bg-gray-200 relative">
                             <img src="https://picsum.photos/seed/photo2/300/300" alt="프로필 사진 2" class="w-full h-full object-cover">
                              <button class="delete-photo-icon absolute top-3 right-3 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer z-10" data-photo-id="2"><i class="fas fa-times"></i></button>
                         </div>
                         <div class="swiper-slide aspect-square overflow-hidden rounded-lg bg-gray-200 relative">
                             <img src="https://picsum.photos/seed/photo3/300/300" alt="프로필 사진 3" class="w-full h-full object-cover">
                              <button class="delete-photo-icon absolute top-3 right-3 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer z-10" data-photo-id="3"><i class="fas fa-times"></i></button>
                         </div>
                         <div class="swiper-slide aspect-square overflow-hidden rounded-lg bg-gray-200 relative">
                             <img src="https://picsum.photos/seed/photo4/300/300" alt="프로필 사진 4" class="w-full h-full object-cover">
                              <button class="delete-photo-icon absolute top-3 right-3 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer z-10" data-photo-id="4"><i class="fas fa-times"></i></button>
                         </div>
                         <div class="swiper-slide aspect-square overflow-hidden rounded-lg bg-gray-200 relative">
                             <img src="https://picsum.photos/seed/photo5/300/300" alt="프로필 사진 5" class="w-full h-full object-cover">
                              <button class="delete-photo-icon absolute top-3 right-3 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer z-10" data-photo-id="5"><i class="fas fa-times"></i></button>
                         </div>
                     </div>
                     <!-- If we need pagination -->
                     <div class="swiper-pagination"></div>
 
                     <!-- If we need navigation buttons -->
                     <!-- <div class="swiper-button-prev"></div>
                     <div class="swiper-button-next"></div> -->
 
                     <!-- If we need scrollbar -->
                     <!-- <div class="swiper-scrollbar"></div> -->
                 </div>
             </div>
            
            <!-- 심층 질문지 결과 -->
            <div class="profile-card p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">심층 질문지 결과</h3>
                    <a href="../questions/results.html" class="text-primary text-sm">상세 보기</a>
                </div>
                <div class="flex items-center mb-4">
                    <div class="w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center text-lg font-bold">
                        ISFP
                    </div>
                    <div class="ml-4">
                        <h4 class="font-bold">모험가형</h4>
                        <p class="text-gray-600 text-sm">균형 잡힌 내향적 성향과 창의적인 문제 해결 능력을 가진 유형</p>
                    </div>
                </div>
                <div class="border-t border-gray-100 pt-4">
                    <h4 class="font-medium mb-2">당신에게 잘 맞는 유형</h4>
                    <div class="flex space-x-2">
                        <span class="bg-accent text-primary px-3 py-1 rounded-full text-sm">ENFJ (주도자형)</span>
                        <span class="bg-accent text-primary px-3 py-1 rounded-full text-sm">INTJ (전략가형)</span>
                    </div>
                </div>
            </div>
            
        </main>
        
        <!-- 하단 네비게이션은 bottom-nav.js에서 자동으로 추가됨 -->

    </div>

    <script src="../components/bottom-nav.js"></script>
    <script>
        const displaySectionBasic = document.getElementById('basic-info-display');
        const editSectionBasic = document.getElementById('basic-info-edit');
        const editButtonBasic = document.getElementById('edit-basic-info-button');
        const saveButtonBasic = document.getElementById('save-basic-info-button');
        const cancelButtonBasic = document.getElementById('cancel-basic-info-button');

        // 보기 모드에서 편집 모드로 전환
        editButtonBasic.addEventListener('click', () => {
            displaySectionBasic.classList.add('hidden');
            editSectionBasic.classList.remove('hidden');
        });

        // 편집 모드에서 보기 모드로 전환 (취소)
        cancelButtonBasic.addEventListener('click', () => {
            editSectionBasic.classList.add('hidden');
            displaySectionBasic.classList.remove('hidden');
            // TODO: 저장되지 않은 변경 사항 되돌리기 로직 추가
        });

        // 편집 모드에서 보기 모드로 전환 (저장)
        // TODO: 실제 데이터 저장 및 보기 모드 업데이트 로직 추가
        saveButtonBasic.addEventListener('click', () => {
            // 현재는 단순히 보기 모드로 전환
            editSectionBasic.classList.add('hidden');
            displaySectionBasic.classList.remove('hidden');
        });

        // TODO: 페이지 로드 시 현재 저장된 데이터를 불러와 편집 모드 input에 설정하는 로직 추가


        const displaySectionBio = document.getElementById('bio-display');
        const editSectionBio = document.getElementById('bio-edit');
        const editButtonBio = document.getElementById('edit-bio-button');
        const saveButtonBio = document.getElementById('save-bio-button');
        const cancelButtonBio = document.getElementById('cancel-bio-button');

        // 자기소개: 보기 모드에서 편집 모드로 전환
        editButtonBio.addEventListener('click', () => {
            displaySectionBio.classList.add('hidden');
            editSectionBio.classList.remove('hidden');
            // 편집 모드 진입 시 textarea에 현재 내용 불러오기
            document.getElementById('edit-bio').value = document.getElementById('display-bio').textContent.trim();
        });

        // 자기소개: 편집 모드에서 보기 모드로 전환 (취소)
        cancelButtonBio.addEventListener('click', () => {
            editSectionBio.classList.add('hidden');
            displaySectionBio.classList.remove('hidden');
            // 취소 시 변경 사항 되돌리기 (여기서는 단순히 편집 전 상태로 되돌림)
            document.getElementById('edit-bio').value = document.getElementById('display-bio').textContent.trim();
        });

        // 자기소개: 편집 모드에서 보기 모드로 전환 (저장)
        saveButtonBio.addEventListener('click', () => {
            const newBio = document.getElementById('edit-bio').value;
            document.getElementById('display-bio').textContent = newBio; // 보기 모드 업데이트

            editSectionBio.classList.add('hidden');
            displaySectionBio.classList.remove('hidden');
            // TODO: 실제 데이터 저장 로직 추가
        });

         // TODO: 자기소개: 페이지 로드 시 현재 저장된 데이터를 불러와 편집 모드 textarea에 설정하는 로직 추가


        const displaySectionInterests = document.getElementById('interests-display');
        const editSectionInterests = document.getElementById('interests-edit');
        const editButtonInterests = document.getElementById('edit-interests-button');
        const saveButtonInterests = document.getElementById('save-interests-button');
        const cancelButtonInterests = document.getElementById('cancel-interests-button');

        // 관심사 & 취향: 보기 모드에서 편집 모드로 전환
        editButtonInterests.addEventListener('click', () => {
            displaySectionInterests.classList.add('hidden');
            editSectionInterests.classList.remove('hidden');

            // 현재 표시된 태그들을 쉼표로 구분된 문자열로 만들어 input에 설정
            document.getElementById('edit-hobbies').value = Array.from(document.querySelectorAll('#display-hobbies span')).map(span => span.textContent).join(', ');
            document.getElementById('edit-music').value = Array.from(document.querySelectorAll('#display-music span')).map(span => span.textContent).join(', ');
            document.getElementById('edit-movies-dramas').value = Array.from(document.querySelectorAll('#display-movies-dramas span')).map(span => span.textContent).join(', ');
        });

        // 관심사 & 취향: 편집 모드에서 보기 모드로 전환 (취소)
        cancelButtonInterests.addEventListener('click', () => {
            editSectionInterests.classList.add('hidden');
            displaySectionInterests.classList.remove('hidden');
            // TODO: 취소 시 변경 사항 되돌리기 로직 추가 (현재는 단순히 이전 값으로 되돌리지 않음)
        });

        // 관심사 & 취향: 편집 모드에서 보기 모드로 전환 (저장)
        saveButtonInterests.addEventListener('click', () => {
            const newHobbies = document.getElementById('edit-hobbies').value.split(',').map(item => item.trim()).filter(item => item !== '');
            const newMusic = document.getElementById('edit-music').value.split(',').map(item => item.trim()).filter(item !== '');
            const newMoviesDramas = document.getElementById('edit-movies-dramas').value.split(',').map(item => item.trim()).filter(item !== '');

            // 보기 모드의 태그 업데이트 함수
            function updateDisplayTags(containerId, tags) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // 기존 태그 제거
                tags.forEach(tag => {
                    const span = document.createElement('span');
                    span.className = 'bg-secondary text-primary text-sm px-3 py-1 rounded-full mr-2 mb-2 inline-block'; // Tailwind 클래스
                    span.textContent = tag;
                    container.appendChild(span);
                });
            }

            updateDisplayTags('display-hobbies', newHobbies);
            updateDisplayTags('display-music', newMusic);
            updateDisplayTags('display-movies-dramas', newMoviesDramas);

            editSectionInterests.classList.add('hidden');
            displaySectionInterests.classList.remove('hidden');
            // TODO: 실제 데이터 저장 로직 추가
        });

        // TODO: 관심사 & 취향: 페이지 로드 시 현재 저장된 데이터를 불러와 편집 모드 input에 설정하는 로직 추가

        // 인증 단계별 배지 표시
        // 상태: unverified(미인증), pending(인증 진행중), verified(인증됨)
        const badge = document.getElementById('verification-badge');
        const verificationStatus = localStorage.getItem('verificationStatus') || 'unverified';
        let badgeHtml = '';
        if (verificationStatus === 'verified') {
            badge.className = 'inline-flex items-center ml-2 px-2 py-0.5 bg-blue-100 text-blue-600 text-xs font-semibold rounded-full align-middle';
            badgeHtml = '<i class="fas fa-check-circle mr-1"></i> 인증됨';
        } else if (verificationStatus === 'pending') {
            badge.className = 'inline-flex items-center ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs font-semibold rounded-full align-middle';
            badgeHtml = '<i class="fas fa-hourglass-half mr-1"></i> 인증 대기';
        } else {
            badge.className = 'inline-flex items-center ml-2 px-2 py-0.5 bg-gray-200 text-gray-500 text-xs font-semibold rounded-full align-middle';
            badgeHtml = '<i class="fas fa-times-circle mr-1"></i> 미인증';
        }
        badge.innerHTML = badgeHtml;

        // 프로필 완성도 계산
        document.addEventListener('DOMContentLoaded', function() {
            // 섹션 데이터 불러오기 (로컬 스토리지에서)
            const section1Answers = localStorage.getItem('section1_answers');
            const section2Answers = localStorage.getItem('section2_answers');
            
            // 완성도 계산 (실제로는 더 복잡한 로직이 필요)
            let completedSections = 0;
            if (section1Answers) completedSections++;
            if (section2Answers) completedSections++;
            
            const totalSections = 5; // 가정
            const completionPercentage = Math.round((completedSections / totalSections) * 100);
            
            // 완성도 UI 업데이트
            const completionBar = document.querySelector('.profile-card .bg-primary.rounded-full');
            if(completionBar) completionBar.style.width = `${completionPercentage}%`;
            const completionText = document.querySelector('.profile-card .text-primary.font-medium');
            if(completionText) completionText.textContent = `${completionPercentage}%`;
            const sectionsCompletedText = document.querySelector('.profile-card .text-gray-500');
            if(sectionsCompletedText) sectionsCompletedText.textContent = `${completedSections}/${totalSections} 섹션 완료`;
            
            // 인증 배지 업데이트
            const certificationBadge = document.getElementById('certification-badge');
            if (certificationBadge) {
                // 완성도에 따라 배지 레벨 결정
                let badgeLevel = 0;
                if (completionPercentage >= 20) badgeLevel = 1;
                if (completionPercentage >= 40) badgeLevel = 2;
                if (completionPercentage >= 60) badgeLevel = 3;
                if (completionPercentage >= 80) badgeLevel = 4;
                
                // 배지 이미지 변경
                certificationBadge.src = `../assets/badge_level${badgeLevel}.svg`;
                certificationBadge.alt = `인증 배지 레벨 ${badgeLevel}`;
            }
        });

        // 프로필 편집 버튼 처리
        document.querySelector('.profile-card button').addEventListener('click', function() {
            // 실제로는 프로필 편집 페이지로 이동
            alert('프로필 편집 기능은 데모용입니다.');
        });
    </script>

    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        // Swiper 초기화
        const swiper = new Swiper('.profile-photo-slider', {
            slidesPerView: 'auto',
            spaceBetween: 10,
            freeMode: true,
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });

        // 사진 삭제 기능
        function addDeleteListenerToPhoto(photoElement) {
            const deleteButton = photoElement.querySelector('.delete-photo-icon');
            if (deleteButton) {
                deleteButton.addEventListener('click', function() {
                    if (confirm('이 사진을 삭제하시겠습니까?')) {
                        // 실제 삭제 로직 (서버 통신 등) 은 여기에 추가
                        console.log('사진 삭제 요청:', deleteButton.dataset.photoId);

                        // Swiper 슬라이드 제거
                        const slide = deleteButton.closest('.swiper-slide');
                        if (slide) {
                            swiper.removeSlide(slide.index);
                        }
                    }
                });
            }
        }

        // 기존 사진들에 삭제 이벤트 리스너 추가
        document.querySelectorAll('.swiper-slide').forEach(addDeleteListenerToPhoto);

        // 파일 입력 변경 감지 (사진 추가)
        document.getElementById('add-photo-input').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // 새 슬라이드 HTML 생성
                    const newSlideHTML = `
                        <div class="swiper-slide">
                            <img src="${e.target.result}" alt="새 프로필 사진">
                            <button class="delete-photo-icon" data-photo-id="temp-${Date.now()}"><i class="fas fa-times"></i></button>
                        </div>
                    `;

                    // Swiper에 새 슬라이드 추가
                    swiper.appendSlide(newSlideHTML);

                    // 새로 추가된 슬라이드 요소 찾기 및 삭제 이벤트 리스너 추가
                    const newSlideElement = swiper.slides[swiper.slides.length - 1];
                    addDeleteListenerToPhoto(newSlideElement);

                    // TODO: 실제 서버에 파일 업로드 및 결과 처리 로직 추가
                    alert('사진 추가 준비됨. 실제 반영은 저장 기능이 구현되어야 합니다.');
                }
                reader.readAsDataURL(file);
            }
            // 같은 파일 다시 선택해도 change 이벤트 발생하도록 초기화
            event.target.value = null;
        });

        // 프로필 완성도 계산
        document.addEventListener('DOMContentLoaded', function() {
            // 섹션 데이터 불러오기 (로컬 스토리지에서)
            const section1Answers = localStorage.getItem('section1_answers');
            const section2Answers = localStorage.getItem('section2_answers');
            
            // 완성도 계산 (실제로는 더 복잡한 로직이 필요)
            let completedSections = 0;
            if (section1Answers) completedSections++;
            if (section2Answers) completedSections++;
            
            const totalSections = 5; // 가정
            const completionPercentage = Math.round((completedSections / totalSections) * 100);
            
            // 완성도 UI 업데이트
            const completionBar = document.querySelector('.profile-card .bg-primary.rounded-full');
            if(completionBar) completionBar.style.width = `${completionPercentage}%`;
            const completionText = document.querySelector('.profile-card .text-primary.font-medium');
            if(completionText) completionText.textContent = `${completionPercentage}%`;
            const sectionsCompletedText = document.querySelector('.profile-card .text-gray-500');
            if(sectionsCompletedText) sectionsCompletedText.textContent = `${completedSections}/${totalSections} 섹션 완료`;
            
            // 인증 배지 업데이트
            const certificationBadge = document.getElementById('certification-badge');
            if (certificationBadge) {
                // 완성도에 따라 배지 레벨 결정
                let badgeLevel = 0;
                if (completionPercentage >= 20) badgeLevel = 1;
                if (completionPercentage >= 40) badgeLevel = 2;
                if (completionPercentage >= 60) badgeLevel = 3;
                if (completionPercentage >= 80) badgeLevel = 4;
                
                // 배지 이미지 변경
                certificationBadge.src = `../assets/badge_level${badgeLevel}.svg`;
                certificationBadge.alt = `인증 배지 레벨 ${badgeLevel}`;
            }
        });

        // 프로필 편집 버튼 처리
        document.querySelector('.profile-card button').addEventListener('click', function() {
            // 실제로는 프로필 편집 페이지로 이동
            alert('프로필 편집 기능은 데모용입니다.');
        });
    </script>
</body>
</html> 